{# Frontend Agent: Tech Stack Requirements #}

{% macro required_packages() %}
## Tech Stack Requirements (Use These EXACT Libraries)

**Required in package.json dependencies:**
```json
{
  "dependencies": {
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-router-dom": "^6.28.0",
    "lucide-react": "^0.468.0",
    "clsx": "^2.1.1",
    "@radix-ui/react-dialog": "^1.1.2",
    "@radix-ui/react-dropdown-menu": "^2.1.2",
    "@radix-ui/react-popover": "^1.1.2",
    "@radix-ui/react-select": "^2.1.2",
    "@radix-ui/react-tooltip": "^1.1.3"
  },
  "devDependencies": {
    "@vitejs/plugin-react": "^4.3.4",
    "autoprefixer": "^10.4.20",
    "postcss": "^8.4.49",
    "tailwindcss": "^3.4.16",
    "vite": "^5.4.11"
  }
}
```

**Key Libraries:**
- **Tailwind CSS** - ALL styling (never plain HTML)
- **@radix-ui/react-*** - For dialogs, dropdowns, popovers, selects
- **lucide-react** - For icons (Search, User, Menu, ChevronDown, etc.)
- **clsx** - For conditional className merging
{% endmacro %}


{% macro ui_quality_requirements() %}
## UI Quality Requirements (CRITICAL)

You MUST create a **beautiful, professional, production-ready** UI.

### Design Standards (MANDATORY):
1. **Color Scheme**: Use brand colors from reference images
2. **Typography**: Professional font hierarchy with proper sizes and weights
3. **Spacing**: Consistent padding/margins using Tailwind (p-4, gap-6, etc.)
4. **Layout**: Use flexbox/grid with proper max-width containers
5. **Components**:
   - Cards with shadows (`shadow-lg rounded-xl`)
   - Buttons with gradients and hover states (`bg-blue-600 hover:bg-blue-700`)
   - Forms with styled inputs (`border rounded-lg focus:ring-2`)
6. **Visual Polish**: Gradients, shadows, rounded corners, transitions

### STRICTLY AVOID:
- **NO plain unstyled HTML** - Every element must have Tailwind classes
- **NO browser default form styles** - Style all inputs, buttons, selects
- **NO layouts without containers** - Use `max-w-7xl mx-auto px-4`
- **NO missing hover/focus states** - Add `hover:` and `focus:` variants
- **NO generic gray/white only** - Use brand colors from reference images

### Example Good Component:
```jsx
// GOOD - Properly styled with Tailwind
<button className="px-6 py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 transition-colors">
  Search
</button>

// BAD - Plain unstyled
<button>Search</button>
```
{% endmacro %}


{% macro api_integration() %}
## API Integration (CRITICAL)

### vite.config.js Configuration

**IMPORTANT:** Use environment variables for ALL ports - never hardcode!

```javascript
import { defineConfig, loadEnv } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig(({ mode }) => {
  const env = loadEnv(mode, process.cwd(), '');
  const port = Number(env.VITE_PORT || env.PORT || 3001);
  const backendTarget = env.VITE_API_PROXY_TARGET || 'http://localhost:3000';
  
  return {
    plugins: [react()],
    server: {
      port,
      strictPort: false,
      host: '0.0.0.0',
      proxy: {
        '/api': {
          target: backendTarget,
          changeOrigin: true
        }
      }
    }
  };
});
```

### src/services/api.js

**ALWAYS use relative `/api` path - Vite proxy handles routing:**

```javascript
// Use relative path - Vite proxy forwards to backend
const API_BASE = '/api';  // NEVER use absolute URLs!

async function request(path, options = {}) {
    const res = await fetch(`${API_BASE}${path}`, { ...options });
    // ...
}
```

**Response format:**
- Lists: `{ items: [...], total: N }` - extract `.items`
- Single item: `{ item: {...} }` - extract `.item`
{% endmacro %}


{% macro dockerfile_requirements() %}
## Dockerfile Requirements

**Development Dockerfile (recommended for faster iteration):**
```dockerfile
FROM node:20-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3001
CMD ["npm", "run", "dev", "--", "--host", "0.0.0.0"]
```

**Production Dockerfile:**
```dockerfile
FROM node:20-alpine AS build
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

FROM nginx:alpine
COPY --from=build /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf
EXPOSE 80
```

**Common Dockerfile mistakes:**
- Using `npm ci --omit=dev` before build (loses devDependencies like vite)
- Missing `--host 0.0.0.0` flag (app only listens on localhost)
- Wrong EXPOSE port (must match docker-compose.yml mapping)
{% endmacro %}

