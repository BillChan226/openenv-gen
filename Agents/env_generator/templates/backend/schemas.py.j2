"""
Pydantic Schemas for {{ env_name }}

Auto-generated by EnvGenerator Multi-Agent System
"""

from datetime import datetime
from typing import Optional, List
from pydantic import BaseModel, EmailStr, Field


{% for entity in entities %}
# =============================================================================
# {{ entity.name }} Schemas
# =============================================================================

class {{ entity.name }}Base(BaseModel):
    """Base schema for {{ entity.name }}"""
    {% for field in entity.fields %}
    {% if not field.primary_key and field.name not in ['created_at', 'updated_at', 'hashed_password'] %}
    {{ field.name }}: {{ field.python_type | default('str') }}{% if field.nullable %} | None = None{% elif field.default is not none %} = {{ field.default_value | default('None') }}{% endif %}
    {% endif %}
    {% endfor %}


class {{ entity.name }}Create({{ entity.name }}Base):
    """Schema for creating {{ entity.name }}"""
    {% if entity.name == 'User' %}
    password: str = Field(..., min_length=8)
    {% endif %}
    pass


class {{ entity.name }}Update(BaseModel):
    """Schema for updating {{ entity.name }}"""
    {% for field in entity.fields %}
    {% if not field.primary_key and field.name not in ['created_at', 'updated_at', 'hashed_password'] %}
    {{ field.name }}: {{ field.python_type | default('str') }} | None = None
    {% endif %}
    {% endfor %}


class {{ entity.name }}Response({{ entity.name }}Base):
    """Response schema for {{ entity.name }}"""
    {% for field in entity.fields %}
    {% if field.primary_key %}
    {{ field.name }}: {{ field.python_type | default('int') }}
    {% endif %}
    {% endfor %}
    {% if entity.has_timestamps %}
    created_at: datetime
    updated_at: datetime | None = None
    {% endif %}
    
    class Config:
        from_attributes = True


{% endfor %}

# =============================================================================
# Authentication Schemas
# =============================================================================

class Token(BaseModel):
    """JWT Token response"""
    access_token: str
    token_type: str = "bearer"


class TokenData(BaseModel):
    """Token payload data"""
    email: str | None = None
    user_id: int | None = None


class LoginRequest(BaseModel):
    """Login request schema"""
    email: EmailStr
    password: str

