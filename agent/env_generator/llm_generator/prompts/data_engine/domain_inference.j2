{#
  Domain Inference Prompt

  Analyzes a project instruction to infer:
  - Primary domain (e-commerce, social-media, news, etc.)
  - Relevant keywords for dataset search
  - Main entities that need data
#}

<TASK>
Analyze the project instruction and infer the data domain.
</TASK>

<EXAMPLES>
Example 1:
Instruction: "Build an e-commerce website like Amazon with product listings, shopping cart, and checkout"
Response:
```json
{
  "domain": "e-commerce",
  "confidence": 0.95,
  "keywords": ["product", "shopping", "cart", "checkout", "price", "inventory", "order", "catalog", "amazon", "retail"],
  "entities": ["Product", "Category", "Cart", "Order", "User", "Review"],
  "search_queries": ["amazon products dataset", "e-commerce product catalog", "retail products with prices"],
  "reasoning": "The instruction explicitly mentions e-commerce features like product listings, shopping cart, and checkout"
}
```

Example 2:
Instruction: "Create a social media platform where users can post updates, follow others, and like content"
Response:
```json
{
  "domain": "social-media",
  "confidence": 0.95,
  "keywords": ["post", "feed", "follow", "like", "comment", "user", "profile", "timeline", "social", "tweet"],
  "entities": ["User", "Post", "Comment", "Like", "Follow", "Notification"],
  "search_queries": ["twitter dataset", "social media posts", "user generated content"],
  "reasoning": "Core social media features: posting, following, and engagement (likes)"
}
```

Example 3:
Instruction: "Build a news aggregation site with articles, categories, and author profiles"
Response:
```json
{
  "domain": "news",
  "confidence": 0.90,
  "keywords": ["article", "news", "headline", "author", "category", "publish", "story", "journalism"],
  "entities": ["Article", "Author", "Category", "Tag", "Comment"],
  "search_queries": ["news articles dataset", "news headlines", "journalism corpus"],
  "reasoning": "News-focused with articles, categories, and author management"
}
```

Example 4:
Instruction: "Create a real estate listing platform for buying and renting properties"
Response:
```json
{
  "domain": "real-estate",
  "confidence": 0.95,
  "keywords": ["property", "listing", "house", "apartment", "rent", "buy", "price", "location", "real estate"],
  "entities": ["Property", "Listing", "Agent", "User", "Inquiry", "Favorite"],
  "search_queries": ["real estate listings", "housing dataset", "property listings"],
  "reasoning": "Real estate platform with property listings for sale and rental"
}
```

Example 5:
Instruction: "Build a restaurant discovery app with menus, reviews, and reservations"
Response:
```json
{
  "domain": "restaurant",
  "confidence": 0.95,
  "keywords": ["restaurant", "menu", "food", "review", "reservation", "cuisine", "dish", "order", "yelp"],
  "entities": ["Restaurant", "Menu", "MenuItem", "Review", "Reservation", "User"],
  "search_queries": ["restaurant dataset", "food reviews", "yelp dataset", "menu dataset"],
  "reasoning": "Restaurant/food service domain with discovery, menus, and bookings"
}
```
</EXAMPLES>

<SUPPORTED_DOMAINS>
- e-commerce: Products, shopping, retail, marketplace
- social-media: Posts, feeds, users, engagement
- news: Articles, journalism, publishing
- real-estate: Properties, listings, rentals
- restaurant: Food, menus, reservations
- travel: Hotels, flights, bookings
- healthcare: Patients, appointments, medical
- education: Courses, students, learning
- finance: Transactions, accounts, banking
- entertainment: Movies, music, streaming
- other: Custom domain not in list
</SUPPORTED_DOMAINS>

<INSTRUCTION>
{{ instruction }}
</INSTRUCTION>

{% if entities %}
<EXISTING_ENTITIES>
{{ entities | tojson(indent=2) }}
</EXISTING_ENTITIES>
{% endif %}

<OUTPUT_FORMAT>
Respond with ONLY valid JSON (no markdown code blocks, no explanation):
{
  "domain": "domain-name",
  "confidence": 0.0-1.0,
  "keywords": ["keyword1", "keyword2", ...],
  "entities": ["Entity1", "Entity2", ...],
  "search_queries": ["query1", "query2", ...],
  "reasoning": "Brief explanation"
}
</OUTPUT_FORMAT>
